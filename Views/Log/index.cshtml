<style>
    footer {
        display: none !important;
    }
</style>

<h2 class="text-2xl font-bold text-gray-200 bg-gray-900 p-4 rounded-t-lg">
    Live Logs
</h2>
<div class="p-4 bg-gray-800 text-white rounded-b-lg shadow-lg mb-20">
    <p class="mb-2 text-lg font-semibold">
        <strong>Logger Instance ID:</strong>
        <span id="instanceId" class="text-green-400 font-mono"></span>
    </p>
    <div class="border border-gray-700 rounded-lg overflow-hidden">
        <ul id="logList" class="bg-gray-900 text-gray-300 text-sm p-3 space-y-1 h-60 overflow-y-auto">
            <!-- Logs s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
        </ul>
    </div>
</div>


@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const connection = new signalR.HubConnectionBuilder()
                .withUrl("/logHub")
                .build();

            connection.on("ReceiveLog", function (logs) {
                console.log("üì¢ Nh·∫≠n logs t·ª´ server:", logs); // Debug
                $("#logList").html(""); // X√≥a danh s√°ch c≈©
                logs.forEach(log => {
                    $("#logList").append(`<li>${log}</li>`); // C·∫≠p nh·∫≠t UI
                });
            });

            connection.start()
                .then(() => console.log("‚úÖ SignalR Connected!"))
                .catch(err => console.error("‚ùå SignalR Error:", err));
        });
        document.addEventListener("DOMContentLoaded", function () {
            fetch("/api/logs/instance")
                .then(response => response.text()) // L·∫•y ID t·ª´ API
                .then(instanceId => {
                    console.log("üîç Logger Instance ID:", instanceId);
                    document.getElementById("instanceId").textContent = instanceId; // Hi·ªÉn th·ªã tr√™n UI
                })
                .catch(error => console.error("‚ùå L·ªói l·∫•y Instance ID:", error));
        });
    </script>
}
