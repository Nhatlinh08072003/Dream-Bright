@model Dream_Bridge.ViewModels.NewsViewModel
@{
    Layout = "_AdminLayout";
}
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản lý tin tức</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .active {
            background-color: rgba(255, 255, 255, 0.2);
            transition: background-color 0.3s ease;
        }

        a {
            transition: background-color 0.3s ease;
            width: 100%;
        }

        .container.mx-auto.flex.items-center.justify-end.gap-3.p-3 {
            display: none;
        }

        .flex.gap-7.text-lg.font-medium.pr-5.pb-7 {
            display: none;
        }

        .w-36 {
            display: none;
        }

        .flex.items-start.justify-center.gap-20.bg-gray-900 {
            display: none;
        }
    </style>
</head>

<body class="items-center justify-center">

    <div class="flex w-[100%]">
        <div
            class="group relative flex h-[900px] w-[50px] flex-col items-start bg-green-500 transition-all duration-500 ease-in-out hover:w-[200px]">
            <a href="/Admin"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">home</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Tổng
                    Quan</span>
            </a>
            <a href="/qltruong"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">school</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Trường</span>
            </a>
            <a href="/qltuvan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">help_outline</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tư vấn</span>
            </a>
            <a href="/qlduhoc"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">public</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Danh
                    mục du học</span>
            </a>
            <a href="/qltintuc"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">announcement</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tin tức</span>
            </a>
            <a href="/qltaikhoan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">account_circle</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tài khoản</span>
            </a>
            <a href="/qlchat"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">chat</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Chat</span>
            </a>
        </div>

        <div class="w-[100%] h-[900px] mx-auto w-[calc(100%-200px)]">
            <h1 class="w-[98%] font-bold text-center text-2xl mt-[2%] text-shadow">Quản lý tin tức</h1>
            <div
                class="w-[5%] mt-[1.5%] h-[4.5%] mr-8 ml-auto mb-[1.5%] shadow-box rounded-lg bg-green-500 text-center">
                <div id="addIcon" class="cursor-pointer flex justify-center items-center h-full">
                    <i class="fas fa-plus mt-2"></i>
                </div>
            </div>
            <div class="mx-auto grid grid-cols-2 mt-[1%] gap-4 w-[100%] h-[18%]" id="newsGrid">
                @foreach (var news in Model.NewsList) // Iterate over the list of news items
                {
                    <div class="w-[95%] h-[100%] border border-black flex items-center justify-center">
                        <div class="w-[95%] h-[85%] flex">
                            <img class="w-[50%] h-[100%]" src="@news.NewsImage" alt=""
                                class="w-auto h-[100%] flex items-center justify-center border border-black">
                            <div class="ml-2 h-[100%] w-[100%] text-[14px] flex flex-col">
                                <h1 class="font-bold">@news.TitleNews</h1>
                                <h1 class="text-[13px] mt-[2%] flex items-end justify-between">@news.NewsDescription</h1>
                                <h1 class="text-[13px] mt-[2%] flex items-end justify-between">Ngày tạo:
                                    @news.CreatedAt.ToString("dd/MM/yyyy")</h1>
                                <span class="cursor-pointer editIcon h-full flex items-end ml-auto">
                                    <i class="fas fa-edit" style="font-size: 20px;"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <!-- Div overlay, ban đầu ẩn -->
            <div class="overlay fixed inset-0 bg-gray-900 bg-opacity-70 flex justify-center items-center hidden"
                id="overlay">
                <div class="modal bg-white p-10 rounded-lg shadow-lg text-center">
                    <form id="myForm" action="QLTintuc" method="post" enctype="multipart/form-data">
                        <div class="w-[400px] h-[100%] border border-black flex items-center justify-center">
                            <div class="w-[100%] p-4 h-[90%] flex">
                                <div class="m-[auto] h-[100%] text-[14px] mt-[2%] flex flex-col justify-between">
                                    <input type="text" asp-for="TitleNews"
                                        class="border p-2 border-black rounded mb-2 w-full" placeholder="Tiêu đề: "
                                        required>
                                    <input type="text" asp-for="NewsDescription"
                                        class="border p-2 border-black rounded mb-2 w-full" placeholder="Mô tả: "
                                        required>
                                    <textarea asp-for="NewsContent" class="border p-2 border-black rounded mb-2 w-full"
                                        placeholder="Nội dung: " required></textarea>
                                    <input type="file" asp-for="ImageFile" id="imageInput" class="mt-4" accept="image/*"
                                        required>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end mt-2">
                            <button type="button" id="closeModal"
                                class="bg-red-500 text-white px-4 py-2 rounded mr-5 flex items-center">
                                <i class="fas fa-times mr-2"></i> Đóng
                            </button>
                            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-paper-plane mr-2"></i> Gửi
                            </button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
    </div>

    <script>
        const addIcon = document.getElementById('addIcon');
        const overlay = document.getElementById('overlay');
        const closeModal = document.getElementById('closeModal');
        const imageInput = document.getElementById('imageInput');
        const uploadedImage = document.getElementById('uploadedImage');

        addIcon.addEventListener('click', () => {
            overlay.classList.remove('hidden');
        });

        closeModal.addEventListener('click', () => {
            overlay.classList.add('hidden');
        });

        imageInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    uploadedImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>

</html>
