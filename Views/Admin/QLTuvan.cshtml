@model IEnumerable<Dream_Bridge.Models.Main.ConsultingRegistration>

@{
    Layout = "_AdminLayout"; // Sử dụng layout admin
}
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hover Effect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>
        .active {
            background-color: rgba(255, 255, 255, 0.2);
            transition: background-color 0.3s ease;
        }

        a {
            transition: background-color 0.3s ease;
            width: 100%;
        }

        .container.mx-auto.flex.items-center.justify-end.gap-3.p-3 {
            display: none;
        }

        .flex.gap-7.text-lg.font-medium.pr-5.pb-7 {
            display: none;
        }

        .w-36 {
            display: none;
        }

        .flex.items-start.justify-center.gap-20.bg-gray-900 {
            display: none;
        }
    </style>
</head>

<body class="w-[100%]">
    <div class="flex w-[100%]">
        <!-- Div lớn chứa các icon -->
        <div
            class="group relative flex h-[900px] w-[50px] flex-col items-start bg-green-500 transition-all duration-500 ease-in-out hover:w-[200px]">
            <a href="/Admin"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">home</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Tổng
                    Quan</span>
            </a>
            <a href="/qltruong"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">school</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Trường</span>
            </a>
            <a href="/qltuvan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">help_outline</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tư vấn</span>
            </a>
            <a href="/qlduhoc"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">public</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Danh
                    mục du học</span>
            </a>
            <a href="/qltintuc"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">announcement</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tin tức</span>
            </a>
            <a href="/qltaikhoan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">account_circle</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tài khoản</span>
            </a>
            <a href="/qlchat"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">chat</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Chat</span>
            </a>
        </div>

        <!-- thẻ table chứa nội dung -->
        <div class="mx-auto h-[900px]">
            <h1 class="w-[100%] font-bold text-center text-shadow text-2xl mt-[2%]">Danh sách tư vấn</h1>
            <div class="w-[100%] mt-[2%]">
                <table class="border mx-auto border-black">
                    <thead>
                        <tr class="bg-green-500">
                            <th class="text-black text-center h-[45px] border border-black">Họ và Tên</th>
                            <th class="text-black text-center h-[45px] border border-black">Email</th>
                            <th class="text-black text-center h-[45px] border border-black">Loại tư vấn</th>
                            <th class="text-black text-center h-[45px] border border-black">Quốc gia tư vấn</th>
                            <th class="text-black text-center h-[45px] border border-black">Số điện thoại</th>
                            <th class="text-black text-center h-[45px] border border-black">Trạng thái</th>
                        </tr>
                    </thead>
                    @* <tbody>
                    <tr>
                    <td class="text-black text-center border border-black p-3">Lê Tiên Nhất Linh</td>
                    <td class="text-black text-center border border-black p-3">LinhStupid@gmail.com</td>
                    <td class="text-black text-center border border-black p-3">Tư vấn du học</td>
                    <td class="text-black text-center border border-black p-3">Du học Mỹ</td>
                    <td class="text-black text-center border border-black p-3">0923663654</td>
                    <td class="text-black text-center border border-black p-3">
                    <select id="options" class="w-[90%] h-[32px] mx-auto bg-green-500 rounded-md">
                    <option value="option1" class="text-center">Chưa tư vấn</option>
                    <option value="option2" class="text-center">Đã tư vấn</option>
                    <option value="option3" class="text-center">Không thể liên lạc</option>
                    </select>
                    </td>
                    </tr>
                    <tr>
                    <td class="text-black text-center border border-black p-3">Lưu Hồng Hữu</td>
                    <td class="text-black text-center border border-black p-3">honghuudeptrai@gmail.com</td>
                    <td class="text-black text-center border border-black p-3">Tư vấn VISA</td>
                    <td class="text-black text-center border border-black p-3">VISA Thụy Sĩ</td>
                    <td class="text-black text-center border border-black p-3">0923663654</td>
                    <td class="text-black text-center border border-black p-3">
                    <select id="options" class="w-[90%] h-[32px] mx-auto bg-green-500 rounded-md">
                    <option value="option1" class="text-center">Chưa tư vấn</option>
                    <option value="option2" class="text-center">Đã tư vấn</option>
                    <option value="option3" class="text-center">Không thể liên lạc</option>
                    </select>
                    </td>
                    </tr>
                    <tr>
                    <td class="text-black text-center border border-black p-3">Trần Anh Quân</td>
                    <td class="text-black text-center border border-black p-3">trananhquandeptrai@gmail.com</td>
                    <td class="text-black text-center border border-black p-3">Tư vấn du học</td>
                    <td class="text-black text-center border border-black p-3">Du học Singapore</td>
                    <td class="text-black text-center border border-black p-3">0923663654</td>
                    <td class="text-black text-center border border-black p-3">
                    <select id="options" class="w-[90%] h-[32px] mx-auto bg-green-500 rounded-md">
                    <option value="option1" class="text-center">Chưa tư vấn</option>
                    <option value="option2" class="text-center">Đã tư vấn</option>
                    <option value="option3" class="text-center">Không thể liên lạc</option>
                    </select>
                    </td>
                    </tr>
                    <tr>
                    <td class="text-black text-center border border-black p-3">Nguyễn Lê Kim Lân</td>
                    <td class="text-black text-center border border-black p-3">nguyenlekimlandeptrai@gmail.com
                    </td>
                    <td class="text-black text-center border border-black p-3">Tư vấn VISA</td>
                    <td class="text-black text-center border border-black p-3">VISA Úc</td>
                    <td class="text-black text-center border border-black p-3">0923663654</td>
                    <td class="text-black text-center border border-black p-3">
                    <select id="options" class="w-[90%] h-[32px] mx-auto bg-green-500 rounded-md">
                    <option value="option1" class="text-center">Chưa tư vấn</option>
                    <option value="option2" class="text-center">Đã tư vấn</option>
                    <option value="option3" class="text-center">Không thể liên lạc</option>
                    </select>
                    </td>
                    </tr>
                    </tbody> *@

                    <tbody>
                        @foreach (var registration in Model)
                        {
                            <tr>
                                <td class="text-black text-center border border-black p-3">@registration.FullName</td>
                                <td class="text-black text-center border border-black p-3">@registration.Email</td>
                                <td class="text-black text-center border border-black p-3">@registration.ConsultingType</td>
                                <td class="text-black text-center border border-black p-3">@registration.ContentConsulting
                                </td>
                                <td class="text-black text-center border border-black p-3">@registration.PhoneNumber</td>
                                <td class="text-black text-center border border-black p-3">
                                    <select onchange="updateStatus(this)" data-id="@registration.IdConsulting" class="w-[90%] h-[32px] mx-auto rounded-md 
            @(registration.Status == "Chưa tư vấn" ? "bg-red-200" : 
              registration.Status == "Đã tư vấn" ? "bg-green-500" : "bg-red-500")">>
                                        <option value="Chưa tư vấn" selected="@(registration.Status == "Chưa tư vấn")"
                                            class="bg-red-200">Chưa
                                            tư vấn</option>
                                        <option value="Đã tư vấn" selected="@(registration.Status == "Đã tư vấn")"
                                            class="bg-green-500">Đã tư vấn
                                        </option>
                                        <option value="Không thể liên lạc"
                                            selected="@(registration.Status == "Không thể liên lạc")" class="bg-red-500">
                                            Không thể liên lạc
                                        </option>
                                    </select>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    function updateStatus(selectElement) {
        var status = selectElement.value;
        var id = $(selectElement).data('id');

        $(selectElement).removeClass("bg-red-200 bg-green-500 bg-red-500");

        // Apply the appropriate background color based on status
        if (status === "Chưa tư vấn") {
            $(selectElement).addClass("bg-red-200");
        } else if (status === "Đã tư vấn") {
            $(selectElement).addClass("bg-green-500");
        } else if (status === "Không thể liên lạc") {
            $(selectElement).addClass("bg-red-500");
        }

        $.ajax({
            url: '/Admin/UpdateStatus',
            type: 'POST',
            data: {
                id: id,
                status: status
            },
            success: function (response) {
                alert('Trạng thái đã được cập nhật');
            },
            error: function (error) {
                alert('Cập nhật trạng thái thất bại');
            }
        });
    }
</script>
