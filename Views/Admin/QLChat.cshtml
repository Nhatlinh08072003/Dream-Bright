@{
    Layout = "_AdminLayout"; // Sử dụng layout admin
}
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .active {
            background-color: rgba(255, 255, 255, 0.2);
            transition: background-color 0.3s ease;
        }

        a {
            transition: background-color 0.3s ease;
            width: 100%;
        }
    </style>
</head>

<body class="bg-gray-100 flex min-h-screen w-screen">
    <div class="flex w-full bg-white shadow-lg rounded-lg overflow-hidden">
        <!-- Div lớn chứa các icon -->
        <div
            class="group relative flex h-[900px] w-[50px] flex-col items-start bg-green-500 transition-all duration-500 ease-in-out hover:w-[200px]">
            <a href="/Admin"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">home</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Tổng
                    Quan</span>
            </a>
            <a href="/qltruong"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">school</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Trường</span>
            </a>
            <a href="/qltuvan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">help_outline</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tư vấn</span>
            </a>
            <a href="/qlduhoc"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">public</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">Danh
                    mục du học</span>
            </a>
            <a href="/qltaikhoan"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">account_circle</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Tài khoản</span>
            </a>
            <a href="/qlchat"
                class="flex items-center relative pl-3 h-[50px] w-[50px] text-white transition-all duration-500 ease-in-out group-hover:w-[200px]">
                <span class="material-icons text-2xl">chat</span>
                <span
                    class="ml-2 whitespace-nowrap opacity-0 transition-opacity duration-500 ease-in-out group-hover:opacity-100">QL
                    Chat</span>
            </a>
        </div>

        <!-- Nội dung quản lý chat -->
        <div class="flex flex-grow mx-auto  p-5 h-[900px]">
            <!-- Danh sách người dùng -->
            <div class="w-1/4 bg-gray-200 p-3 rounded-lg overflow-y-auto">
                <h2 class="font-bold text-lg mb-3">Danh sách người dùng</h2>
                <!-- Danh sách người dùng, có thể thay thế bằng dữ liệu từ backend -->
                <ul id="user-list" class="space-y-2">
                    <li class="cursor-pointer p-2 bg-white rounded-lg hover:bg-gray-300" data-user-id="1">Người dùng
                        1
                    </li>
                    <li class="cursor-pointer p-2 bg-white rounded-lg hover:bg-gray-300" data-user-id="2">Người dùng
                        2
                    </li>
                    <li class="cursor-pointer p-2 bg-white rounded-lg hover:bg-gray-300" data-user-id="3">Người dùng
                        3
                    </li>
                </ul>
            </div>

            <!-- Khu vực tin nhắn -->
            <div class="flex-grow mx-5 w-[1200px] bg-gray-100 p-5 rounded-lg flex flex-col h-[500px]">
                <h1 class="font-bold text-2xl text-center mb-5">Quản lý Chat</h1>

                <!-- Khung chat -->
                <div id="chat-container" class="flex flex-col bg-white p-5 rounded-lg flex-grow overflow-y-auto">
                    <!-- Nội dung tin nhắn sẽ được thêm vào đây -->
                </div>

                <!-- Ô nhập tin nhắn và nút gửi -->
                <div class="flex mt-4">
                    <input type="text" id="message-input" class="flex-grow p-3 border border-gray-300 rounded-lg"
                        placeholder="Nhập tin nhắn...">
                    <button id="send-button"
                        class="ml-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Gửi</button>
                </div>
            </div>
        </div>

        <script>
            // Giả lập dữ liệu tin nhắn từ backend
            const chatData = {
                1: [
                    { sender: 'User', message: 'Xin chào, tôi cần hỗ trợ!' },
                    { sender: 'Admin', message: 'Chào bạn, tôi có thể giúp gì cho bạn?' }
                ],
                2: [
                    { sender: 'User', message: 'Tôi cần tư vấn về khóa học.' },
                    { sender: 'Admin', message: 'Bạn muốn tư vấn về khóa học nào?' }
                ],
                3: [
                    { sender: 'User', message: 'Làm sao để liên hệ với tư vấn viên?' },
                    { sender: 'Admin', message: 'Bạn có thể liên hệ qua số điện thoại 123456789.' }
                ]
            };

            // Xử lý khi người dùng chọn từ danh sách
            document.querySelectorAll('#user-list li').forEach(user => {
                user.addEventListener('click', () => {
                    const userId = user.getAttribute('data-user-id');
                    loadChatMessages(userId);
                });
            });

            // Hàm tải tin nhắn từ người dùng đã chọn
            function loadChatMessages(userId) {
                const chatContainer = document.getElementById('chat-container');
                chatContainer.innerHTML = ''; // Xóa tin nhắn cũ

                const messages = chatData[userId] || [];
                messages.forEach(msg => {
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('message', 'mb-4', 'p-3', 'rounded-lg');
                    messageDiv.classList.add(msg.sender === 'Admin' ? 'bg-green-200' : 'bg-blue-200');
                    messageDiv.classList.add(msg.sender === 'Admin' ? 'self-end' : 'self-start');
                    messageDiv.innerHTML = `<p class="font-semibold">${msg.sender}:</p><p>${msg.message}</p>`;

                    chatContainer.appendChild(messageDiv);
                });

                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            // Xử lý gửi tin nhắn
            document.getElementById('send-button').addEventListener('click', () => {
                const input = document.getElementById('message-input');
                const message = input.value.trim();
                const chatContainer = document.getElementById('chat-container');

                if (message !== '') {
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('message', 'mb-4', 'p-3', 'rounded-lg', 'bg-green-200', 'self-end');
                    messageDiv.innerHTML = `<p class="font-semibold">You:</p><p>${message}</p>`;

                    chatContainer.appendChild(messageDiv);
                    input.value = ''; // Xóa ô nhập
                    chatContainer.scrollTop = chatContainer.scrollHeight; // Cuộn xuống
                }
            });
        </script>
    </div>
</body>

</html>
